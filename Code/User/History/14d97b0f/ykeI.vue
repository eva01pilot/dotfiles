<script setup lang="ts">
import { computed, onMounted, onUnmounted, ref } from 'vue';
import Dashboard from './components/dashboard.vue';
import Leftbar from './components/leftbar.vue';
import Topbar from './components/topbar.vue';

const screenWidth = ref(0)
const isDesktop = computed({ get: () => screenWidth.value > 768 || window.innerWidth > 768, set: () => { } })
const isNavOpen = ref(false)
onMounted(() => {
  if(window.innerWidth > 768) {
    console.log('asdfafaf')
    isNavOpen.value = true
    
  }
  window.addEventListener('resize', () => {
    screenWidth.value = window.innerWidth
    if (screenWidth.value > 768) {
      isNavOpen.value = true
    }
  })
})
onUnmounted(() => {
  window.removeEventListener('resize', () => { })
})
const onNavOpen = () => {
  isNavOpen.value = !isNavOpen.value
}
</script>

<template>
  <div class="overflow-hidden  h-screen">
    <Topbar @navOpen="onNavOpen" :isBurgerNav="!isDesktop"
      class="fixed left-0 right-0 h-[66.5px] top-0 z-50 bg-white md:static overflow-hidden" />
    <main class="grid md:grid-cols-[2fr_5fr] xl:grid-cols-[1fr_5fr] grid-cols-1 relative md:static mt-[66.5px] md:mt-0">
        <aside class="overflow-hidden">
          <Leftbar v-if="isNavOpen ?? isDesktop" class="overflow-hidden  bg-white" />
        </aside>
      <section class=" bg-[#F9FAFB] ">
        <Dashboard />
      </section>
    </main>
  </div>
</template>

<style>
html{
  overflow-y: hidden;
  box-sizing: border-box;
}
</style>
